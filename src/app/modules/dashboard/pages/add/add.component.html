
<div class="mx-auto px-4 py-4 sm:px-8 lg:container">

  <div class="flex flex-1 items-center justify-center bg-white dark:bg-night-700 ">
    <div class="max-w-md overflow-y-auto px-4 sm:w-[500px]">
  
      <form [formGroup]="customerForm" (ngSubmit)="submitForm()" class="my-10 space-y-6">
        <div class="text-center">
          <h2 class="mb-1 text-3xl font-semibold text-gray-700 dark:text-white">
            Add new Customer <span class="text-primary-500">!</span>
          </h2>
        </div>
      
        <div
          class="my-4 flex items-center before:mt-0.5 before:flex-1 before:border-t before:border-gray-300 after:mt-0.5 after:flex-1 after:border-t after:border-gray-300 dark:before:border-night-500 dark:after:border-night-500">
        </div>
      
        <div class="space-y-3 text-left">
          <div class="relative">
            <input type="text" id="firstName" formControlName="firstName"  class="peer block" placeholder=" " />
            <label
              for="firstName"
              class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-white px-2 text-sm text-gray-500 duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary-500 dark:bg-night-700 dark:text-night-200">
              First Name
            </label>
          </div>
          <span class="text-red-500  text-xs  dark:text-night-300" *ngIf="getControl('firstName')?.hasError('required') && getControl('firstName')?.touched">
            First name is required
          </span>
          <small class="text-red-500 	 text-xs  dark:text-night-300" *ngIf="getControl('firstName')?.hasError('minlength') && getControl('firstName')?.touched">
              First name must have at least 5 characters
          </small>
          <small class="text-red-500  	 text-xs  dark:text-night-300" *ngIf="getControl('firstName')?.hasError('maxlength') && getControl('firstName')?.touched">
              First name must not exceed 25 characters.
          </small>
          <small class="text-red-500  text-xs  dark:text-night-300" *ngIf="getControl('firstName')?.hasError('maxlength') && getControl('firstName')?.touched">
            First name must not exceed 25 characters.
          </small>

          <div class="relative">
            <input type="text" id="lastName" formControlName="lastName"  class="peer block" placeholder=" " />
            <label
              for="lastName"
              class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-white px-2 text-sm text-gray-500 duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary-500 dark:bg-night-700 dark:text-night-200">
              Last Name
            </label>
          </div>
          <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('lastName')?.hasError('required') && getControl('lastName')?.touched">
            Last name is required
        </small>
        <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('lastName')?.hasError('minlength') && getControl('lastName')?.touched">
            Last name must have at least 5 characters
        </small>
        <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('lastName')?.hasError('maxlength') && getControl('lastName')?.touched">
            Last name must not exceed 25 characters.
        </small>
          <div class="relative">
            <input type="email" id="email" formControlName="email" class="peer block" placeholder=" " />
            <label
              for="email"
              class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-white px-2 text-sm text-gray-500 duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary-500 dark:bg-night-700 dark:text-night-200">
              Email address
            </label>
          </div>

          <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('email')?.hasError('required') && getControl('email')?.touched">
            Email is required
        </small>
        <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('email')?.hasError('email') && getControl('email')?.touched">
            Invalid email format
        </small>
          
          <div class="relative">
            <input type="text" id="address" formControlName="address" class="peer block" placeholder=" " />
            <label
              for="address"
              class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-white px-2 text-sm text-gray-500 duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary-500 dark:bg-night-700 dark:text-night-200">
              Address
            </label>
          </div>
          <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('address')?.hasError('required') && getControl('address')?.touched">
            Address is required
        </small>
        <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('address')?.hasError('minlength') && getControl('address')?.touched">
            Address must have at least 6 characters
        </small>
        <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('address')?.hasError('maxlength') && getControl('address')?.touched">
            Address must not exceed 30 characters.
        </small>
          <div class="relative">
            <input type="text" id="phoneNumber" formControlName="phoneNumber" class="peer block" placeholder=" " />
            <label
              for="phoneNumber"
              class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-white px-2 text-sm text-gray-500 duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary-500 dark:bg-night-700 dark:text-night-200">
              Phone Number
            </label>
          </div>
          <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('phoneNumber')?.hasError('required') && getControl('phoneNumber')?.touched">
            Phone number is required
        </small>
        <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('phoneNumber')?.hasError('pattern') && getControl('phoneNumber')?.touched">
            Phone number must 10 digits long and start with 0
        </small>
          <span class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('phoneNumber')?.hasError('phoneNumberExists')" >
            Phone number already exists
          </span>
         
          <div class="relative">
            <!-- <input type="text" id="gender" class="peer block" placeholder=" " /> -->
            <select id="gender" formControlName="gender" class=" bg-white px-2 text-sm text-gray-500 duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary-500 dark:bg-night-700 dark:text-night-200" required>
              <option value="" disabled selected >Select Gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
            </select>
          </div>
          <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getControl('gender')?.hasError('required') && getControl('gender')?.touched">
            Gender is required
        </small>
        </div>
      
       

        <!-- this for adding new Account? -->
        <div formArrayName="accounts">
          <div *ngFor="let account of accounts.controls; let i = index">
            <div [formGroupName]="i">
              <div class="space-y-3 text-left">

                <div class="relative">
                  <!-- <input type="text" id="gender" class="peer block" placeholder=" " /> -->
                  <select id="gender" formControlName="type" class=" bg-white px-2 text-sm text-gray-500 duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary-500 dark:bg-night-700 dark:text-night-200" required>
                    <option value="" disabled selected >Account Type</option>
                    <option value="saving">Saving</option>
                    <option value="checking">Checking</option>
                  </select>
                  <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getAccountTypeControl(i)?.hasError('required') && getAccountTypeControl(i)?.touched">
                    Account Type is required
                    </small>
                </div>

                <div class="relative">
                  <input type="number" id="accountBalance"  id="accountBalance" formControlName="balance" class="peer block" placeholder=" " />
                  <label
                    for="accountBalance"
                    class="absolute top-2 left-1 z-10 origin-[0] -translate-y-4 scale-95 transform bg-white px-2 text-sm text-gray-500 duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 peer-focus:text-primary-500 dark:bg-night-700 dark:text-night-200">
                    Account Balance
                  </label>
                  <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getAccountBalanceControl(i)?.hasError('required') && getAccountBalanceControl(i)?.touched">
                    Account balance is required
                    </small>
                    <small class="text-red-500 text-xs  dark:text-night-300" *ngIf="getAccountBalanceControl(i)?.hasError('min') && getAccountBalanceControl(i)?.touched">
                      Account balance must be greater than or equal to 200
                      </small>
                </div>
              </div>
               <button type="button" class="text-xs text-gray-400 dark:text-night-300" (click)="removeAccount(i)">Remove Account</button>
            </div>
          </div>
        </div>
       
        <button
        type="button"
        (click)="addAccount()"
        [disabled]="!canAddAccount()"
        class="group relative flex w-full justify-center rounded-md border border-transparent bg-gray-50 py-2 px-4 text-sm font-medium text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 hover:bg-gray-100 dark:bg-night-600 dark:text-night-200 dark:hover:bg-night-500">
        Add New Account
      </button>
        
        <!-- end og this for adding new Account? -->
      
        <!-- Submit Button -->
        <button
          type="button"
          type="submit"
          [disabled]="!customerForm.valid"
          class="group relative mb-10 flex w-full justify-center rounded-md border border-transparent bg-primary-500 py-2 px-4 text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 hover:bg-primary-400">
          Create Customer
        </button>      
      </form>
  
    </div>
  </div>
</div>

